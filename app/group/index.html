<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Generator Kelompok Pro v4.3 - Final Tweaks</title>
        <link rel="stylesheet" href="./css/style.css" />
    </head>
    <body>
        <div class="container">
            <!-- button back to dashboard -->
            <button onclick="window.location.href='/'" class="back-btn">
                Back
            </button>
            <h1>Generator Kelompok Pro</h1>
            <div class="header-controls">
                <label class="toggle-switch" title="Ganti Tema">
                    <input type="checkbox" id="themeToggle" />
                    <span class="slider"></span>
                    <svg
                        class="sun-icon"
                        fill="var(--warning-color)"
                        viewBox="0 0 24 24"
                    >
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 12h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.64 5.64c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L5.64 2.81C5.25 2.42 4.62 2.42 4.22 2.81s- .39 1.02 0 1.41l1.42 1.42zm12.72 12.72c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-1.42-1.42c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41l1.42 1.42zM4.22 19.78c.39.39 1.02.39 1.41 0l1.42-1.42c.39-.39.39-1.02 0-1.41s-1.02-.39-1.41 0l-1.42 1.42c-.39.39-.39 1.02 0 1.41zM18.36 5.64c.39-.39.39-1.02 0-1.41s-1.02-.39-1.41 0l-1.42 1.42c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0l1.42-1.42z"
                        />
                    </svg>
                    <svg
                        class="moon-icon"
                        fill="var(--text-color)"
                        viewBox="0 0 24 24"
                    >
                        <path
                            d="M9.37 5.51A7.35 7.35 0 009 6c0 4.42 3.58 8 8 8 .34 0 .68-.02 1-.07C13.1 18.25 8.87 15.15 9.37 5.51z"
                        />
                    </svg>
                </label>
                <div>
                    <span style="font-size: 14px; color: var(--secondary-text)"
                        >Mode Advanced</span
                    >
                    <label class="toggle-switch">
                        <input type="checkbox" id="advancedModeToggle" />
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="list-manager">
                <div class="list-manager-controls">
                    <select id="listManagerSelect"></select>
                    <button
                        id="loadListBtn"
                        class="icon-btn"
                        title="Muat Daftar"
                        style="background-color: var(--primary-color)"
                    >
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
                            ></path>
                        </svg>
                    </button>
                    <button
                        id="saveListBtn"
                        class="icon-btn"
                        title="Simpan Daftar"
                        style="background-color: var(--success-color)"
                    >
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path
                                fill-rule="evenodd"
                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                clip-rule="evenodd"
                            ></path>
                        </svg>
                    </button>
                    <button
                        id="deleteListBtn"
                        class="icon-btn"
                        title="Hapus Daftar"
                        style="background-color: var(--danger-color)"
                    >
                        <svg fill="currentColor" viewBox="0 0 20 20">
                            <path
                                fill-rule="evenodd"
                                d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z"
                                clip-rule="evenodd"
                            ></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <div class="label-group">
                    <!-- PERUBAHAN: Label dengan penghitung jumlah orang -->
                    <label for="nameInput"
                        >Masukan Nama
                        <small
                            id="totalCountLabel"
                            style="
                                font-weight: normal;
                                color: var(--secondary-text);
                            "
                        ></small
                    ></label>
                    <button id="clearAllBtn" class="btn-link">
                        Bersihkan Semua
                    </button>
                </div>
                <div class="tags-container" id="tagsContainer">
                    <input
                        type="text"
                        id="nameInput"
                        placeholder="Ketik, Enter, atau Paste daftar..."
                    />
                </div>
            </div>

            <div id="advancedFeatures" class="hidden">
                <div class="rules-engine" id="rulesEngine">
                    <h3>Aturan Pembagian Kelompok</h3>
                    <div class="rule-input-group">
                        <select id="ruleName1"></select>
                        <select id="ruleName2"></select>
                        <button
                            id="addAffinityBtn"
                            title="Harus Bersama"
                            class="icon-btn"
                            style="background-color: var(--success-color)"
                        >
                            +
                        </button>
                        <button
                            id="addExclusionBtn"
                            title="Harus Terpisah"
                            class="icon-btn"
                            style="background-color: var(--danger-color)"
                        >
                            -
                        </button>
                    </div>
                    <ul class="rules-list" id="affinityRulesList"></ul>
                    <ul class="rules-list" id="exclusionRulesList"></ul>
                </div>
                <div class="form-group" style="margin-top: 20px">
                    <label>Jika ada sisa anggota:</label>
                    <div>
                        <input
                            type="radio"
                            id="distributeLeftovers"
                            name="leftover"
                            value="distribute"
                            checked
                        />
                        <label
                            for="distributeLeftovers"
                            style="display: inline; font-weight: normal"
                            >Bagikan ke kelompok lain</label
                        >
                    </div>
                    <div>
                        <input
                            type="radio"
                            id="newGroupLeftovers"
                            name="leftover"
                            value="new_group"
                        />
                        <label
                            for="newGroupLeftovers"
                            style="display: inline; font-weight: normal"
                            >Buat kelompok baru</label
                        >
                    </div>
                </div>
            </div>

            <div class="form-group options">
                <div>
                    <label for="groupCount">Jumlah Kelompok</label
                    ><input type="number" id="groupCount" min="1" />
                </div>
                <div>
                    <label for="peoplePerGroup">Orang per Kelompok</label
                    ><input type="number" id="peoplePerGroup" min="1" />
                </div>
            </div>

            <div class="form-group" style="text-align: right">
                <input type="checkbox" id="creativeNamesToggle" />
                <label
                    for="creativeNamesToggle"
                    style="display: inline; font-weight: normal"
                    >Gunakan nama kelompok kreatif</label
                >
            </div>

            <button id="generateBtn" class="btn">Buat Kelompok!</button>
            <div id="results"></div>

            <div class="results-actions" id="resultsActions">
                <button id="reshuffleBtn" class="btn btn-reshuffle">
                    Acak Ulang
                </button>
                <button id="exportCsvBtn" class="btn btn-copy">
                    Ekspor (CSV)
                </button>
                <button id="copyTxtBtn" class="btn btn-copy">
                    Salin (Teks)
                </button>
                <button id="copyJsonBtn" class="btn btn-copy">
                    Salin (JSON)
                </button>
            </div>
        </div>

        <script src="./js/script.js"></script>
    </body>
</html>
